<!-- content page -->
<div class="portlet light bordered">
    <div class="portlet-title">
        <div class="caption uppercase bold font-blue">
            <i class="icon-list font-blue"></i>
            <span class="caption-subject">Company Detail</span>
        </div>
        <!-- <div class="tools hidden-xs">
            <a href="javascript:;" class="collapse"></a>
            <a href="javascript:;" class="fullscreen"> </a>
        </div> -->
    </div>
    <div class="portlet-body form">
            <div class="form-body">
                <div class="tabbable-custom">
                    <ul class="nav nav-tabs">
                        <li class="active">
                            <a href="index.html#tab_1" data-toggle="tab" ng-click="viewmodel('CompanySites')" > Basic Information </a>
                        </li>
                         <li>
                            <a href="index.html#tab_2" data-toggle="tab" ng-click="viewmodel('Funds')" > Insurer List </a>
                        </li>
                        <li>
                            <a href="index.html#tab_3" data-toggle="tab" ng-click="viewmodel('Patients')" > Staff List </a>
                        </li>
                        <li>
                            <a href="index.html#tab_4" data-toggle="tab" ng-click="viewmodel('UserAccounts')"> User Account </a>
                        </li>
                    </ul>
                    <div class="tab-content">
                        <div class="tab-pane active" id="tab_1">
                            <div class="row">
                                <div class="col-md-4 col-sm-4">
                                    <h4 class="form-section">
                                        Basic info &nbsp;&nbsp;&nbsp;
                                        <a href="javascript:;" 
                                            class="btn btn-md yellow-lemon" 
                                            ng-click="updateCompany(info)">
                                                <i class="glyphicon glyphicon-pencil"></i> Update
                                        </a>
                                    </h4>
                                    <div class="form-group">
                                        <label class="control-label">Company Name</label>
                                        <input type="text" class="form-control" ng-model="info.CompanyName" readonly="true" />
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label">Company Code</label>
                                        <input type="text" class="form-control" readonly="true" />
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label">Description</label>
                                        <textarea class="form-control" ng-model="info.Description" readonly="true" ></textarea>
                                    </div>
                                </div>
                                <div class="col-md-8 col-sm-8">
                                    <h4 class="form-section">Site info
                                        <a href="javascript:;" 
                                            class="btn btn-md blue pull-right" 
                                            style="position:relative; margin-top:-12px" 
                                            ng-click="openmodal('CompanySite','create',null)">
                                            <i class="glyphicon glyphicon-plus"></i> Add</a>
                                    </h4>
                                    <div class="table-scrollable margin-top-30">
                                        <table class="table table-light table-hover table-striped">
                                            <thead>
                                                <tr class="uppercase">
                                                    <th width="1">#</th>
                                                    <th>Site Name</th>
                                                    <th>Address</th>
                                                    <th>Contact Name</th>
                                                    <th>Contact Number</th>
                                                    <th width="1">Enable</th>
                                                    <th style="width: 3%;">&nbsp;</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="s in info.CompanySites">
                                                    <td>{{$index+1}}</td>
                                                    <td>{{s.SiteName}}</td>
                                                    <td>{{s.Address1}}</td>
                                                    <td>{{s.ContactName}}</td>
                                                    <td>{{s.HomePhoneNumber}}</td>
                                                    <td ng-click="openmodal('CompanySite','delete',s)" ><i ng-class="{'glyphicon glyphicon-ok turquoisetype':s.Enable==='Y','glyphicon glyphicon-remove redtype':s.Enable==='N'}"></i></td>
                                                    <td>
                                                        <a href="javascript:;" class="btn btn-circle btn-only-icon btn-icon-only blue" 
                                                            ng-click="openmodal('CompanySite','update',s.UID)" ng-show="s.Enable ==='Y'">
                                                            <i class="glyphicon glyphicon-pencil"></i>

                                                        </a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                        <div class="tab-pane" id="tab_2">
                            <h4 class="form-section">
                                Insurer List
                                <a class="btn btn-md blue pull-right" 
                                    style="position:relative; margin-top:-12px; margin-right:2px;" 
                                    ng-click="openmodal('Insurer','create',-1)">
                                    <i class="glyphicon glyphicon-plus"></i> Add
                                </a>
                            </h4>
                            <div class="table-scrollable margin-top-30">
                                <table class="table table-bordered table-hover table-striped">
                                    <thead>
                                        <tr style="width:100%;">
                                            <th width="1">#</th>
                                            <th>Fund Name</th>
                                            <th>ATO</th>
                                            <th>Type</th>
                                            <th width="1">Active</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="s in info.Funds">
                                            <td>{{$index+1}}</td>
                                            <td>{{s.FundName}}</td>
                                            <td>{{s.ATO}}</td>
                                            <td>{{s.Type}}</td>
                                            <td ng-click="openmodal('Insurer','delete',s)" ><i ng-class="{'glyphicon glyphicon-ok turquoisetype':s.RelFundCompany.Active==='Y','glyphicon glyphicon-remove redtype':s.RelFundCompany.Active==='N'}"></i></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="tab-pane" id="tab_3">
                            <h4 class="form-section">
                                Staff List
                                <a href="javascript:;" 
                                    class="btn btn-md blue pull-right" 
                                    style="position:relative; margin-top:-12px;" 
                                    ng-click="openCreateStaff()">
                                    <i class="glyphicon glyphicon-plus"></i> Add</a>
                                <a class="btn btn-md yellow-lemon pull-right" 
                                    style="position:relative; margin-top:-12px; margin-right:2px;" 
                                    ng-click="openmodal('Staff','create',-1)">
                                    <i class="glyphicon glyphicon-paperclip"></i> Link</a>
                            </h4>
                            <div class="table-scrollable margin-top-30">
                                <table class="table table-bordered table-hover table-striped">
                                    <thead>
                                        <tr style="width:100%;">
                                            <th width="1">#</th>
                                            <th>First Name</th>
                                            <th>Last Name</th>
                                            <th>DOB</th>
                                            <th>Gender</th>
                                            <th>Home Phone</th>
                                            <th width="1">Active</th>
                                        </tr>
                                        <tr style="width:100%;">
                                            <th>&nbsp;</th>
                                            <th>
                                                <input type="text" class="form-control" placeholder="First Name" ng-model="search.FirstName" ng-keypress="Search(search,$event.which)" ng-change="checknull('FirstName')" >
                                            </th>
                                            <th>
                                                <input type="text" class="form-control" placeholder="Last Name" ng-model="search.LastName" ng-keypress="Search(search,$event.which)" ng-change="checknull('LastName')" >
                                            </th>
                                            <th>
                                                <input class="form-control form-control-inline date-picker" placeholder="dd/mm/yyyy" size="16" type="text" data-date-format="dd/mm/yyyy" date-start-date="1/1/1900" data-date-end-date="0d" id="DOB" ng-model="search.DOB" ng-change="Search(search,'13')" ng-change="checknull('DOB')">
                                            </th>
                                            <th>
                                                <select class="form-control" placeholder="Gender" ng-model="search.Gender" ng-change="Search(search,'13');checknull('Gender')" >
                                                    <option value="">All</option>
                                                    <option value="Male">Male</option>
                                                    <option value="Female">Female</option>
                                                    <option value="Other">Other</option>
                                                </select>
                                            </th>
                                            <th>
                                                <input type="text" class="form-control" placeholder="Home Phone" ng-model="search.HomePhoneNumber" ng-keypress="Search(search,$event.which)" ng-change="checknull('HomePhoneNumber')">
                                            </th>
                                            <th>&nbsp;</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="s in info.Patients">
                                            <td>{{s.stt}}</td>
                                            <td>{{s.FirstName}}</td>
                                            <td>{{s.LastName}}</td>
                                            <td>{{s.DOB}}</td>
                                            <td>{{s.Gender}}</td>
                                            <td>{{s.HomePhoneNumber}}</td>
                                            <td ng-click="openmodal('Staff','delete',s)" ><i class="glyphicon glyphicon-ok turquoisetype"></i></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <!-- begin pagination -->
                            <div class="row">
                                <div class="col-md-5 col-sm-12">
                                    &nbsp;
                                </div>
                                <div class="col-md-7 col-sm-12" style="text-align:right">
                                    <div class="dataTables_paginate paging_simple_numbers" id="sample_1_paginate">
                                        <uib-pagination 
                                        boundary-links="true" 
                                        total-items="count" 
                                        ng-model="searchObjectMap.currentPage" 
                                        class="pagination-lg " 
                                        previous-text="&lsaquo; " 
                                        next-text="&rsaquo; " 
                                        first-text="&laquo; " 
                                        last-text="&raquo; " 
                                        items-per-page="searchObjectMap.limit" 
                                        max-size="searchObjectMap.maxSize"
                                        ng-change="setPage('Patients')"></uib-pagination>
                                    </div>
                                </div>
                            </div>
                            <!-- end pagination -->
                        </div>
                        <div class="tab-pane" id="tab_4">
                            <h4 class="form-section">
                                User Account
                                <a class="btn btn-md blue pull-right" 
                                    style="position:relative; margin-top:-12px" 
                                    ng-click="openmodal('UserAccounts','create',null)">
                                    <i class="glyphicon glyphicon-plus"></i> Add
                                </a>
                                <a class="btn btn-md yellow-lemon pull-right" 
                                    style="position:relative; margin-top:-12px; margin-right:2px;" 
                                    ng-click="openLinkPatient()">
                                    <i class="glyphicon glyphicon-paperclip"></i> Link
                                </a>
                            </h4>
                            <div class="table-scrollable margin-top-30">
                                <table class="table table-bordered table-hover table-striped">
                                    <thead>
                                        <tr style="width:100%;">
                                            <th width="1">#</th>
                                            <th>User Name</th>
                                            <th>PhoneNumber</th>
                                            <th>Email</th>
                                            <th width="1">&nbsp;</th>
                                            <th width="1">Enable</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="u in info.UserAccounts">
                                            <td>{{$index+1}}</td>
                                            <td>{{u.UserAccount.UserName}}</td>
                                            <td>{{u.UserAccount.PhoneNumber}}</td>
                                            <td>{{u.UserAccount.Email}}</td>
                                            <td><button type="button" class="btn btn-danger" ng-click="deleteUser(u)" >Delete</button></td>
                                            <td ng-click="openmodal('UserAccounts','delete',u)" ><i ng-class="{'glyphicon glyphicon-ok turquoisetype':u.Enable==='Y','glyphicon glyphicon-remove redtype':u.Enable==='N'}"></i></td>
                                        </tr>
                                        <tr>
                                            
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
<!-- end content page -->
<script type="text/ng-template " id="CompanySitemodal">
    <company-site on-type="type" on-uid="uid" on-comp="Compuid" on-cancel="cancel" on-load-again="loadagain" ></company-site>
</script>

<script type="text/ng-template " id="Usermodal">
    <company-user on-type="type" on-uid="uid" on-comp="Compuid" on-cancel="cancel" on-compid="Compid" on-load-again="loadagain" on-reset="reset" is-have-username="true" ></company-user>
</script>

<script type="text/ng-template " id="linkPatient">
    <patient-list on-select="true" on-staff="staff" on-compid="compid" on-roleid="6" is-have-username="true" ></patient-list>
</script>

<script type="text/ng-template " id="Staffmodal">
    <company-staff on-type="type" on-uid="uid" on-comp="Compuid" on-compid="Compid" on-cancel="cancel" on-load-again="loadagain" ></company-staff>
</script>

<script type="text/ng-template " id="CreateStaff">
    <patient-create on-item="true" on-staff="staff" on-compid="compid" on-reset="reset" role-company="true" ></patient-create>
</script>

<script type="text/ng-template " id="Insuresmodal">
    <company-insurer on-type="type" on-uid="uid" on-comp="Compuid" on-compid="Compid" on-cancel="cancel" on-load-again="loadagain" ></company-insurer>
</script>

<script type="text/ng-template " id="UpdateCompanyModal">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" 
            aria-hidden="true" ng-click="cancel()"></button>
        <h4 class="modal-type uppercase bold font-red-thunderbird">
            <i class="icon-settings"></i> Update Basic</h4>
    </div>
    <div class="modal-body">
        <div class="form-body">
             <div class="form-group">
                <label class="control-label">Company Name</label>
                <input type="text" class="form-control" ng-model="info.CompanyName" />
            </div>
        </div>
        <div class="form-group">
            <label class="control-label">Description</label>
            <textarea class="form-control" ng-model="info.Description" ></textarea>
        </div>
    </div>
    <div class="modal-footer" style="background: #f5f5f5">
        <div class="form-actions right">
            <button type="button" class="btn btn-lg dark" data-dismiss="modal" 
                ng-click="cancel()"><i class="glyphicon glyphicon-arrow-left"></i> Cancel</button>
            <button class="btn btn-lg red-thunderbird" ng-click="click()" >
                Update <i class="glyphicon glyphicon-save"></i></button>
        </div>
    </div>

</script>
<style type="text/css">
    .redtype {
        color : red !important;
    }

    .turquoisetype {
        color: turquoise !important;
    }
</style>